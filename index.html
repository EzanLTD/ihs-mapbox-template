<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>DePaul Institute for Housing Studies | Building Age Composition</title>

  <meta name="author" content="DePaul Institute for Housing Studies" />
  <meta name="description" content="In-depth stories about Brooklyn â€” all of Brooklyn." />
  <meta name="robots" content="index, follow" />

  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />

  <!-- Web app-able -->
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black"/>

  <!-- 1140px Grid styles for IE -->
  <!--[if lte IE 9]><link rel="stylesheet" href="css/ie.css" type="text/css" media="screen" /><![endif]-->

  <!-- The 1140px Grid - http://cssgrid.net/ -->
  <link rel="stylesheet" href="/css/cssgrid.css" type="text/css" media="screen" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/custom.css" type="text/css" media="screen" />

  <!--css3-mediaqueries-js - http://code.google.com/p/css3-mediaqueries-js/ - Enables media queries in some unsupported browsers-->
  <script type="text/javascript" src="js/css3-mediaqueries.js"></script>

  <!-- jQuery -->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

  <!-- MAPBOX  -->
    <script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.css' rel='stylesheet' />
    <!--[if lte IE 8]>
      <link href='//api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.ie.css' rel='stylesheet' >
    <![endif]-->
</head>

<body>

<div id="topNav">
  <h2>Cook County Building Age Composition</h2>
  <a href="http://www.housingstudies.org/"><img src='/images/ihs-logo.png' alt='DePaul Institute for Housing Studies' /></a>
</div>
<div id='map'></div>

</div>

<script>

  var tooltip_template = '<h3>{{{HousingC_1}}}</h3>\
    <table >\
      <tbody>\
        <tr>\
          <td>Single-Family</td>\
          <td>{{{HousingC_3}}}</td>\
        </tr>\
        <tr>\
          <td>Condominium</td>\
          <td>{{{HousingC_4}}}</td>\
        </tr>\
        <tr>\
          <td>2 to 4 Unit Bldg</td>\
          <td>{{{HousingC_5}}}</td>\
        </tr>\
        <tr>\
          <td>5 to 49 Unit Bldg</td>\
          <td>{{{HousingC_6}}}</td>\
        </tr>\
        <tr>\
          <td>50+ Unit Bldg</td>\
          <td>{{{HousingC_7}}}</td>\
        </tr>\
      </tbody>\
    </table>\
  ';

  var legend_template = "<div id='my-legend'>\
    <h4>Housing Composition</h4>\
    <div class='legend-scale'>\
      <ul class='legend-labels'>\
        <li><span style='background:#F5D4A3;'></span>Single-Family</li>\
        <li><span style='background:#EDAB50;'></span>Condominium</li>\
        <li><span style='background:#8DA7CE;'></span>2 to 4 Unit Building</li>\
        <li><span style='background:#375481;'></span>5 to 49 Unit Building</li>\
        <li><span style='background:#1F2F47;'></span>50 + Unit Building</li>\
      </ul>\
    </div>\
    <div class='legend-source'>Source: <a href='http://www.housingstudies.org/dataportal/composition/housing-units-composition/county/2012/2012/''>Cook County Assessor</a></div>\
    </div>";


  var map = L.mapbox.map('map', '', {minZoom: 10, maxZoom:16} ).setView([41.86943299643522, -87.72926330566406], 12);
  var gridLayer = L.mapbox.gridLayer('housingstudies.hace6l6h');
  map.addLayer(L.mapbox.tileLayer('housingstudies.hace6l6h'));
  map.addLayer(gridLayer);

  var tooltip = L.mapbox.gridControl(gridLayer);
  tooltip.setTemplate(tooltip_template);
  map.addControl(tooltip);

  var legend = L.mapbox.legendControl();
  legend.addLegend(legend_template);
  map.addControl(legend);

  var commAreas;
  $.when($.getJSON('data/community-areas.geojson')).then(
    function(communities){
      commAreas = L.geoJson(communities, {
        style: {opacity: 0, color: "#EDAB50", fillOpacity: 0},
        onEachFeature: function(feature, layer){
          layer.on('mouseover', function(e){
            layer.setStyle({opacity: 0.7})
          });
          layer.on('mouseout', function(e){
            layer.setStyle({opacity: 0})
          })
        }
      })
      commAreas.addTo(map);
    }
  )

</script>
</body>
</html>
